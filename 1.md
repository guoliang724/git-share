### Merge

1. git 分支的工作模式

![avatar](./分支指针.png)

2. 合并分支的方式

- merge 命令
  1）fast-forward merge
  ![avatar](./f1.png)
  <!-- ![avatar](./f2.png) -->

  2）three-way merge
  ![avatar](./t1.png)
  <!-- ![avatar](./t2.png) -->

- rebasing 命令(重写了历史)

  1. 效果
     ![avatar](./r1.png)
     ![avatar](./r2.png)
     ![avatar](./r3.png)

  2. 原理
     ![avatar](./r4.png)
     ![avatar](./r5.png)

### 后悔药

![avatar](./reset1.png)

仓库：
git reset --hard HEAD~1

<!-- git restore --source=HEAD~1 . -->

![avatar](./reset2.png)

暂存区：
git reset --mixed HEAD~1

<!-- git restore --staged . -->

![avatar](./reset3.png)

工作区：
git reset --hard HEAD~1
![avatar](./reset4.png)

<!-- git restore . -->

如果我们已经 push 了之后，如何做撤销呢？
git revert HEAD~1

<!-- 增加一个commit但是内容是之前的 -->
<!-- git revert HEAD~3..HEAD (不会包含第四个) -->
<!-- git revert --no-comit HEAD~3..HEAD (直接到暂存区，需commit) -->

### 时光机

git checkout `hash`

![avatar](./c1.png)

<!-- ![avatar](./c2.png) -->
<!-- ![avatar](./c3.png) -->
<!-- 此处不要再commit了 -->

### 细节

1. pull = fetch + merge(three-way or rebasing)
2. git remote -v
   git remote add `name` `url`
   <!-- git remote rename `upstream` `base` -->
   <!-- git remote rm `name` -->
3. bisect debug/squash merging/cherry picking
4. 重写历史：
   1）revert commit
   2）恢复丢失的 commit（不小心 reset 到以前的某个 commit 上，如何恢复呢
   ？）
   3）修改最后一个 commit（发现有的文件忘改了，如何操作？）
   4） reword commit（修改 message）

git status -s 查看工作区改变后，暂存区的状态
git diff 工作区做的改变
git diff --staged 查看暂存区的改变
git diff --cached 查看仓库的变化
git show `hash`
git show HEAD~1:`文件名`
